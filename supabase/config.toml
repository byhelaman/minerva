# Supabase Edge Functions Configuration
# ==========================================
#
# zoom-api: Actualiza meetings de Zoom
# Verificación: verifyUserRole(req, supabase, ROLES.ADMIN_AND_ABOVE)
[functions.zoom-api]
enabled = true
verify_jwt = false
entrypoint = "./functions/zoom-api/index.ts"

# zoom-auth: Maneja OAuth flow con Zoom  
# Verificación: verifyUserRole(req, supabase, ROLES.ADMIN_AND_ABOVE)
[functions.zoom-auth]
enabled = true
verify_jwt = false
entrypoint = "./functions/zoom-auth/index.ts"

# zoom-sync: Sincroniza usuarios y meetings de Zoom
# Verificación: verifyAccess() - acepta JWT admin O internal key (cronjobs)
[functions.zoom-sync]
enabled = true
verify_jwt = false
import_map = "./functions/zoom-sync/deno.json"
entrypoint = "./functions/zoom-sync/index.ts"

# zoom-webhook: Recibe webhooks de Zoom
# Verificación: Firma HMAC con x-zm-signature (Zoom no envía JWT)
[functions.zoom-webhook]
enabled = true
verify_jwt = false
entrypoint = "./functions/zoom-webhook/index.ts"

# microsoft-auth: Maneja OAuth flow con Microsoft y config de OneDrive
# Verificación: verifyAccess() interno
[functions.microsoft-auth]
enabled = true
verify_jwt = false
entrypoint = "./functions/microsoft-auth/index.ts"

# microsoft-graph: Proxy para API de Microsoft Graph / OneDrive
# Verificación: verifyAccess() interno
[functions.microsoft-graph]
enabled = true
verify_jwt = false
entrypoint = "./functions/microsoft-graph/index.ts"

